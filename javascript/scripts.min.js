/**
 * This is our base install scripts js file - it contains various shims for browser behaviour and a few other helpful methods
 *
 * Various scripts have been borrowed from around the web - sorry if they haven't been attributed - it is mostly due to losing the source at some stage
 *
 * @author: Matthew Daniels, 2013
 */(function(){Date.now=Date.now?Date.now:function(){return+(new Date)},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1});var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};while(r--)e=n[r],i[e]||(i[e]=t);var s=0,o=["ms","moz","webkit","o"],u=0,a=o.length&&!window.requestAnimationFrame;for(;u<a;++u)window.requestAnimationFrame=window[o[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[u]+"CancelAnimationFrame"]||window[o[u]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=Date.now(),r=Math.max(0,16-(n-s)),i=window.setTimeout(function(){e(n+r)},r);return s=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),window.cru=window.cru||{},window.cru.toType=window.toType||function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},window.cru.notNull=function(e){return e!=null&&typeof e!="undefined"},window.log=window.trace=function(){log.history=log.history||[],log.history.push(arguments);if(this.console){var t=arguments,n;t.callee=t.callee.caller,n=[].slice.call(t),typeof i.log=="object"?log.apply.call(i.log,i,n):i.log.apply(i,n)}}})();